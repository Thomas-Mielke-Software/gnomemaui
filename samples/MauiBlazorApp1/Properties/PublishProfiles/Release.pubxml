<Project>
    <PropertyGroup>
        <Configuration>Release</Configuration>
        <Platform>Any CPU</Platform>
        <PublishDir>../publish/BlazorGirCoreApp</PublishDir>
        <PublishProtocol>FileSystem</PublishProtocol>
        <_TargetId>Folder</_TargetId>
        <TargetFramework>net10.0</TargetFramework>
        <RuntimeIdentifier>linux-x64</RuntimeIdentifier>

        <DebugType>None</DebugType>
        <DebugSymbols>False</DebugSymbols>

        <SelfContained>true</SelfContained>
        <PublishSingleFile>true</PublishSingleFile>
        <!-- Publishing options comparison:
            - ReadyToRun enabled (103 MB): ~830ms startup, faster with AOT-compiled code
            - ReadyToRun disabled (79 MB): ~974ms startup, smaller binary size with JIT compilation
            Enable ReadyToRun for better startup performance at the cost of ~25 MB binary size -->
        <!-- <PublishReadyToRun>true</PublishReadyToRun> -->
        <!-- <TrimMode>partial</TrimMode> -->
        <PublishAot>true</PublishAot>
    </PropertyGroup>

    <!-- linux-arm64 -->
    <PropertyGroup Condition="'$(RuntimeIdentifier)' == 'linux-arm64'">
        <PublishDir>../publish/aarch64/glibc</PublishDir>
        <CppCompilerAndLinker>aarch64-linux-gcc</CppCompilerAndLinker>
        <SysRoot>/opt/dotnet-aot-xc/linux-arm64/aarch64-buildroot-linux-gnu/sysroot</SysRoot>
        <ObjCopyName>aarch64-buildroot-linux-gnu-objcopy</ObjCopyName>
    </PropertyGroup>

    <!-- linux-x64 glibc -->
    <PropertyGroup Condition="'$(RuntimeIdentifier)' == 'linux-x64'">
        <PublishDir>../publish/x86_64/glibc</PublishDir>
        <CppCompilerAndLinker>x86_64-buildroot-linux-gnu-gcc</CppCompilerAndLinker>
        <CppLinker>x86_64-buildroot-linux-gnu-ld.bfd</CppLinker>
        <SysRoot>/opt/dotnet-aot-xc/linux-x64/x86_64-buildroot-linux-gnu/sysroot</SysRoot>
        <ObjCopyName>x86_64-buildroot-linux-gnu-objcopy</ObjCopyName>
    </PropertyGroup>
</Project>
